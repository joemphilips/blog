---
categories: []
date: 2017-04-13T17:30:54+09:00
description: "Why Proof of Stake doesn't work on public blockchain"
draft: true
tags: []
title: なぜパブリックチェーン上でProof of Stakeは機能しないのか
---


パブリックブロックチェーン上でのコンセンサスアルゴリズムについての議論のたびに同じ内容の意見を繰り返して議論が平行線に終わるのを何度か見かけました。
例えば

**「パブリックブロックチェーン上でPoWとPoSのどちらかが優れているかはまだ結論が出ていない」
* 「PoWは"価値の裏付け"として機能するので、新規通貨の発行はPoWで行わなくてはならないが、その後はPoSでも構わない」
* 「PoSの方が"セキュア"なので、価値が高まる」

といったものです。

この件に関して、現時点での私の見解をまとめます。
結論から言うと、

1. 上記の意見は全て間違っており、
2. 「貨幣のプロトコル」としてはPoW以外に方法は存在しない。

です。

根拠を説明する前に共有すべき前提を書きます。

## 前提1: 貨幣の価値は常に相対的なものである。

これは本当に当たり前の話なのですが、きちんと理解できていないがために議論が混乱する場合があります。

例えば以下の二つはあなたの財産に対して全く事なる影響を与えることが分かればOKです。

1. あなたが今持っているBTCの額が100倍になる。
2. 全ての人が持っているBTCの額が100倍になる。

1はあなたの資産価値を100倍にしますが、2は単位が（つまり**呼び名**が）変化するだけで、各人の持つBTCに資産価値に影響はありません。

これがわかれば以下も当たり前になります。

### 通貨の新規発行と全ての人から少しずつ徴税することは同じである。

例えば全世界のビットコインの総発行料が10BTCだったとして、10人が1BTCずつそれを持っているとします。
ある日11人目がやってきて、彼が謎の力で無から10BTCをゲットしたとします。

これは、すでにBTCを持っていた10人から0.5BTCずつ徴税して、その後全BTCの額を二倍にするのと同じ結果になります。
したがって、11人目が10BTCをゲットした瞬間、すでに存在した10人の資産価値は半分になります。

貨幣の価値が相対的なものであるというのはそういう意味です。「自分がいくら持っているか」ではなく、「自分が全流通量の何%を持っているか？」が大事なのです。

### したがって、トランザクション手数料と新規通貨発行報酬とを区別すべき理由は存在しない

ある暗号通貨が本当に「通貨」として機能していれば、一定量のトランザクションが常に存在し、そのトランザクション手数料をブロックに取り込むことによる収益の期待値を計算することができます。

スパム防止のため、手数料をゼロに固定することは不可能[^1]なので、マイナーは常にブロックを作成することによる利益があります。

# 本論

では、新規通貨発行報酬とトランザクション手数料との間に明確な差がないという事を示したので、
以下の議論では全通貨の発行が終わった後の、手数料の再分配についてのみ考えます。

理解を優しくするために、経済圏全体のごく簡単なモデルを考えます。
以下のように、4人が経済に参加していて、総発行量の10,20,30,40%をそれぞれ所有していることとします。

また、彼らの間で通貨のやり取りがあり、長期的持ち分は変化しないものの
一定期間に各人3%ずつ（全体の12%）がトランザクション手数料としてブロック生成報酬に与えられるものと仮定します。
（もし、各人の払う手数料が長期的にStakeの量と比例するならば、議論の前提が崩れますが、ちょっと考えればその仮定は非現実的であることがわかると思います。）




このようにして、はじめに40%のStakeを保持していた人物は不労所得を得ることになり、
その分持ち分が少なかった（図中一番左の）人間は損をしている事になります。

これは経済圏全体からすればほんの僅かな違いのように見えるかもしれませんが、そうではありません。
何故かと言うと、損をする側にその通貨を「使用しない」インセンティブを与えるからです。（あなたの保持する貨幣の価値は、全体の「割合」によって決まるということを思い出してください。）
彼からすればすればとっととこの通過を全額売り払って別の通貨で生活したほうが得ということになります。


<>


したがって、今度は3人で同じゲームが繰り返されます。同様の理屈で最後の一人になるまで続きます。

## Q. PoWでも同じでは？

いえ、違います。PoWでは上記の12%（手数料）が、**ハッシュパワー**に応じて分配されます。
もしも裕福なマイナーが効率的なマイニングの努力を怠っていた場合、その分を努力で取り返すことができるためです。

不労所得があり得ない


### Q. 貧乏な人が**努力**して稼ぎ、裕福な側からを報酬を得ればいいんじゃないの？

言い換えると「各人のStakeが一定であるという仮定は非現実的なんじゃないの？」というツッコミが考えられます。

# まとめ

## ではPoWは？

結局のところ、PoSの問題点が何かというと、今まで何度も指摘されてきたように

1. 富めるものがますます富み
2. それに対してできることが何もない。

という点に有ります。
もしあなたが「PoWでも同じじゃないか」と思ったのなら、それはPoWを誤解しています。
PoWで利益を得るのは、「他よりも裕福な者」ではなく「他よりも**上手く**マイニングした者」です。

「上手く」とは具体的には例えば、

1. 電力が安い土地に工場を作る
2. ASICの効率を上げる
3. [他マイナーが発行したブロックのすばやい検証を可能にする](http://bitcoinfibre.org/)

などです。

いずれの場合でも、**採掘権が自由市場で行われている限り**、マイナーは長期的優位を保持することはできません。[^2] [他のマイナーが常に収益をあげようと努力をするためです](https://ja.wikipedia.org/wiki/%E8%B5%A4%E3%81%AE%E5%A5%B3%E7%8E%8B%E4%BB%AE%E8%AA%A://ja.wikipedia.org/wiki/%E8%B5%A4%E3%81%AE%E5%A5%B3%E7%8E%8B%E4%BB%AE%E8%AA%AC)。[^3]


ここまでに述べた理由から、「ビットコインも将来的にはPoSに以降すべきだ」という主張がナンセンスなことがわかります。もしそうなったら、ハードフォークしてPoWのものが存続するでしょう。
そして、そちらの時価総額が常にもう一方を上回ることが今までの議論から簡単に予想できます。[^4]

とはいえ、現在のPoWとは異なるものになる可能性は十分ありえます。
Proof of WorkのWorkは必ずしも「ハッシュパワー」のことを指すのではないからです。
例えば[Proof of HumanWork](https://eprint.iacr.org/2016/145.pd://eprint.iacr.org/2016/145.pdf)（CAPTCHAを解かせて、ハッシュパワーの代わりにする方法）などがあります。

重要な点は**たとえ資産家であっても、ブロック発行権を保持し続けるのが簡単ではない**という部分にあります。そうでなければPoSと同じ問題が発生するためです。

十分大きな自由市場は、どうしてもガバナンスの問題になります。「我々はどのような"Work"を有効なWorkとして認め**たい**のか？」という公共善の問題です。


## PoSに移行したらEthereumはどうなる？

ここで述べた理屈を人が完全に理解していた場合、PoSになることが確定した瞬間、ETHの価格はゼロに成ります。
しかし、現実にそういうことはないでしょう。なぜなら

1. ETHに投資している大多数の人間がこの理屈を理解していないから
2. 現時点でEthereumには[RootStock](http://www.rsk.co/)のテストネットとしての価値があるから

です。上下を繰り返しながら、長期的にはゆっくりと下がって行くのではないでしょうか

誤解しないでほしいのは、私はEthereumはDeveloperにとっては素晴らしいところであると思っているという点です。
例えば[Golem](https://golem.network/)や[Gnosis](https://gnosis.pm/)は素晴らしい実証実験ですし、そのDeveloperは本当に尊敬に値します。

また、彼らに対してトークンを買うという形で「寄付」することも自由です。応援したいとと思ったなら積極的に寄付しましょう。

ただ、あくまで**寄付**なのであってそれを「投資」だと思っているならば、少し慎重になったほうがいい、という意見です。

同じ目的のプロジェクトがRootStockや独立したサイドチェーンで立ち上がった際に、それらのトークンが有効である保証はないのではないでしょうか。




[^1]: ここでの議論に関係ないので深くは述べませんが、プロトコルの設計が下手だとマイナー間で[共有地の悲劇](https://ja.wikipedia.org/wiki/%E3%82%B3%E3%83%A2%E3%83%B3%E3%82%BA%E3%81%AE%E6%82%B2%E5%8A%87)が起きて、手数料がゼロになって機能しなくなる可能性はあります。
[^2]: 逆に言えば、「今のビットコインのマイニング環境は自由市場とは言えないのではないか？」という主張は可能です。ただ、そのように主張する場合には (1.「完全な自由市場」というものは想像上の産物であって実在しない事。(2. 必要な初期投資の大きさは自由市場であるか否かとは直接の関係がないこと。を念頭に置く必要があります。
[^3]: これには「プロトコルがマイナーの利害で決められてはならない」、つまり「天から与えられるものではくてはならない」という問題があります。ですから、プロトコルの策定は政治の問題、マイナーの努力は市場の問題。という住み分けが必要になります。誤解を恐れず大雑把に言うと、これを意図的にごっちゃにしようとしているのが最近のBitcoin Unlimitedとか[ASICboost](http://www.jpbitcoinblog.info/entry/20170408/1491659347)とかの問題です。
[^4]: 一応断っておくと、現時点で全通貨発行後のビットコインネットワークの状況を考えるのは一見あまり意味のないことのように思えます。その頃には我々の想像の及ばない何かが起きて、議論の前提が崩れる可能性があるためです。ただ、なぜPoWでなくてはならないのかを考える思考実験としては有用です。
