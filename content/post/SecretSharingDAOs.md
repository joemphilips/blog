---
categories: ["hack", "crypto"]
date: 2016-10-11T15:08:10+09:00
description: "ethereum and hyperledger"
draft: true
keywords: ["blockchain"]
title: 秘匿分散DAO, もう一つの暗号2.0
---

この文書はEthrereum Project共同創業者の一人 Vitalik Buterinによる [Secret Sharing DAOs: The Other Crypto 2.0](https://blog.ethereum.org/2014/12/26/secret-sharing-daos-crypto-2-0/)の和訳です。大変興味深い内容だったので翻訳します。

以下和訳
-------

今年（訳注: 2014年）、暗号技術2.0の業界はブロックチェーン技術を大いに発達させました。例えば

1. [Slasher](https://blog.ethereum.org/2014/01/15/slasher-a-punitive-proof-of-stake-algorithm/)（訳注: Nothing at Stakeを防止する懲罰的プロトコル）や[DPOS](http://wiki.bitshares.org/index.php/DPOS_or_Delegated_Proof_of_Stake) のようなProof of stakeの定式化や実現
2. 様々な[形式](http://www.reddit.com/r/ethereum/comments/2jvv5d/ethereum_blog_scalability_part_2_hypercubes/)での[スケーラブル](https://github.com/petertodd/tree-chains-paper/blob/master/tree-chains.tex)なブロックチェーン[アルゴリズム](https://blog.ethereum.org/2014/11/13/scalability-part-3-metacoin-history-multichain/)
3. [古典的なビザンチン対障害性](http://pebble.io/docs/)(Byzantine fault tolerancae)理論から拝借した「リーダー不要合意」のメカニズム
4. [Schelling合意形成](https://blog.ethereum.org/2014/03/28/schellingcoin-a-minimal-trust-universal-data-feed/)の[仕組み](https://blog.ethereum.org/2014/03/28/schellingcoin-a-minimal-trust-universal-data-feed/)や、それを利用した[価格変動性の少ない通貨](https://blog.ethereum.org/2014/11/11/search-stable-cryptocurrency/)

中央集権型の仕組みに比べてブロックチェーンが劣っていた点は全て、これらの技術によって大いに改善されるでしょう。

1は合意形成のコストの低下とセキュリティの向上をもたらし、
2はサイズ（訳注: ブロックサイズのこと？）の制限とトランザクションのコストを下げ、
3は悪用可能性(exploitability)を減らし、
4はブロックチェーンが現実のデータに「気づく」ことを可能にします。

しかしながら、一つだけ欠けたパズルのピースがあります。**プライバシー**です。

## 通貨、分散アプリケーション、そしてプライバシー

ビットコインは、経済面でのプライバシーという点において幾分ユニークなトレードオフを提供します。

**物理的アイデンティティ**の秘匿という面ではいかなる先達の技術と比べても遥かに優れています。銀行などの中央集権システムの場合はIDの登録が必須ですし、現金はTorネットワークを介して支払うことができないためです。

一方で**トランザクション**の秘匿性という点においては史上最もパブリックなシステムであると言えるでしょう。
合衆国政府であろうと、中国政府であろうと、ご近所の13歳のハッカーでさえ、いつどこでどのアカウントがどのアカウントにどれだけのBTCを送金したのか確かめるのにはウォレットすら必要ない、という点では同じだからです。

大雑把に言って、この2つの特性がビットコインをそれぞれ反対方向に引っ張ろうとしており、どちらが勝利するかは完全には明らかではありません。

Ethrereumの状況は理屈の上では似ていますが、現実はだいぶ違います。ビットコインは貨幣としての使用を想定しており、貨幣とは本質的に交換可能なものです。

ですから例えば[マージ回避(merge aboidance)](https://medium.com/@octskyward/merge-avoidance-7f95a386692f)のようなテクニックを用いて、ウォレットが背後でアカウントの分割を行えば、一つのアカウントを完全に分割して別々のアカウントであるかのように振る舞わせることが可能です。
[Coinjoin](https://bitcointalk.org/index.php?topic=279249.0)を用いれば出資金を非中央集権的に「混ぜる」ことが可能ですし、何らかの機関が代表して資金の統合を行うことも難しくありません。

一方でEthrereumの場合、**あらゆる**プロセスや関係性の中間状態を保持することを目的に設定されていますが、それらの多くは貨幣よりも遥かに複雑で「アカウントに紐付けられた(account-based)」情報であるため、単一の参加者が複数のアカウントで活動を行っていた場合、それを統合するためのコストは非常に高くつく可能性があります。

故に、多くの面で現状Ethrereumは、ビットコインの秘匿性よりも透明性という側面を継承しています。(もっとも、Ethereumを貨幣として利用したい場合はサブ貨幣として使用可能な秘匿性の高いプロトコルをあとから作成することは間違いなく可能ですが。)

さて、問題は本当にプライバシー保護が必要になった場合、どのように需要を満たすべきか、です。
Diaspora式（訳注: [分散型SNSの一種](https://en.wikipedia.org/wiki/Diaspora_(software)）のセルフホスティングベースの方法と[Zerocasah](http://zerocash-project.org/)式のゼロ知識証明に基づいた方法が思いつきます。
が、例えば、複数のユーザーの個人情報に対して集計処理を行いたいとするといずれも不可能です。

ブロックチェーン自体のデータと、スケーラビリティの問題はいったん置いておくとして、それでも、上記のブロックチェーンの仕組みに内在するプライバシーの欠如はやはり、何らかの集権化されたサーバに信頼を置かなくてはならないということを示しているのでしょうか？
それとも、両者の利点だけを、つまり
情報の分散化された制御と状態のアップデート（書き込み）だけでなく、情報それ自体へのアクセス権（読み込み）をブロックチェーンライクな仕組みで管理する方法を提供すること
は可能なのでしょうか？

結論から言うと、「可能」です。

実を言うと、アイディア自体は[1998年に](http://godcoin.org/)Nick Szaboによって提唱されており、「神のプロトコル」というあだ名さえついています。（「神」という単語は、他のすべてに対してパレート優越(Pareto-superior)な存在であると**想定**されているのではなく**定義**されています。Szabo自身が指摘してくれたとおり、これから説明するプロトコルは、そのような意味での神の存在からはほど遠いものです。）ビットコインスタイルの暗号経済学的技術の進展によって、このプロトコルが初めて有効になりうる状況が生まれました。

そのプロトコルとは一体何なのでしょうか？技術的に性格で、かつわかりやすい用語として、これを

秘匿分散DAO(secret sharing DAO)

と呼ぶことにします。

## 基礎技術: 秘匿分散

理論的な話をスキップして応用を知りたい方は[こちら](https://blog.ethereum.org/2014/12/26/secret-sharing-daos-crypto-2-0/#applications)をクリックしてください。

秘匿情報の計算ネットワーク(Secret computation network)は情報を分散して保持するために、２つの基礎技術に依拠しています。その一つが[秘密分散(secret sharing)](https://en.wikipedia.org/wiki/Secret_sharing)です。

> 訳注: 本文では触れられていませんが、これは正確にはShamir's Secret Sharingと呼ばれる方式です。

これは簡単にいうと`N`人の参加者がデータを分割して保持し、そのうち`K`人が協力すればデータを完全に復元できるが、`K-1`人では何の情報も得られないようなデータの分割方式です。(`K <= N`)ならば`K`,`N`は任意の値を取ることができます。

数学的な説明をしましょう。点が２つあれば、そこを通る直線は一意に決まるということはわかりますね？

<img src="/static/images/SecretSharingDAOs/twopoints.png">

ですので、`2-of-N`の秘密分散（`K = 2`）を構築することを考えます。分散したい情報を`S`とすると、まずランダムな傾き`m`をとり、`y = mx + S`という直線を作成します。そして`N`人それぞれに直線上の点`(1, m + S)`, `(2, 2m + S)`, `(3, 3m + S)`を教えます。

`N`人のうち、任意の２人がお互いの情報を教え合えば、`S`が分かりますが
１人では何もできません。たとえば`(4, 12)`という点を持っていても、元の直線は
`y = 2x + 4`、`y = -10x + 52`、`y = 305445x - 1221768`というように無限にあり得るからです。

`3-of-N`の秘密分散を適用する場合、直線を放物線（二次関数）に変えればOKです。

<img src="/static/images/SecretSharingDAOs/threepoints.png">

２つの点がわかっただけならば、その点を通る放物線は無限に考えられますが、３つの点を通る放物線は一意に求まります。したがって上と同様の原理で復元できます。

同様にして、`K-of-N`の秘密分散を行いたい場合、`K - 1`次の多項式を用いればよいということがわかるでしょう。
